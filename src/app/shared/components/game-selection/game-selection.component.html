<div class="game-selection">
    <h2>Select Your Game{{ selectedRooms > 1 ? 's' : '' }}</h2>

    @if (selectedRooms > 1) {
        <div class="step-description">
            You're booking {{ selectedRooms }} rooms. Select a game for each room (can be the same game multiple times).
        </div>
    }

    @if (selectedRooms === 1) {
        <div class="games-selection">
            @for (g of games; track trackByCode($index, g)) {
                <app-game-card
                        [game]="g"
                        [selected]="isSelected(g, 0)"
                        (choose)="onChoose(0, g)">
                </app-game-card>
            }
        </div>
    } @else {
        <div class="multi-room-selection">
            @for (roomIndex of roomIndexes(); track roomIndex) {
                <div class="room-game-section">
                    <h3 class="room-title">Room {{ roomIndex + 1 }}</h3>
                    <div class="games-selection-compact">
                        @for (g of games; track trackByCode($index, g)) {
                            <app-game-card
                                    class="compact"
                                    [game]="g"
                                    [selected]="isSelected(g, roomIndex)"
                                    (choose)="onChoose(roomIndex, g)">
                            </app-game-card>
                        }
                    </div>
                </div>
            }
        </div>
    }

    <!-- âœ… Buttons moved inside -->
    <div class="step-actions">
        <app-button variant="outline" (clicked)="back.emit()">
            {{ 'common.back' | translate }}
        </app-button>
        <app-button (clicked)="continue.emit()" [disabled]="!canContinue">
            {{ 'common.continue' | translate }}
        </app-button>
    </div>
</div>
