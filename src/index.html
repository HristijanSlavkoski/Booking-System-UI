<!DOCTYPE html>
<html lang="en">
<head>
    <title>VR Escape - Virtual Reality Escape Rooms</title>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description"
          content="Experience the ultimate VR escape room adventure. Book your immersive virtual reality experience today!"/>
    <base href="/">
    <script>
        (function () {
            let PARENT_ORIGIN = 'https://www.intetic.com';

            let lastHeight = 0;
            let rafId = 0;
            let ro = null;

            function getDocHeight() {
                const b = document.body, d = document.documentElement;
                return Math.max(
                    b ? b.scrollHeight : 0, d.scrollHeight,
                    b ? b.offsetHeight : 0, d.offsetHeight,
                    b ? b.clientHeight : 0, d.clientHeight
                );
            }

            function post(msg) {
                window.parent.postMessage(msg, PARENT_ORIGIN); // must be a full origin or "*"
            }

            function postHeight(shrinkAware = true) {
                if (rafId) cancelAnimationFrame(rafId);
                rafId = requestAnimationFrame(() => {
                    const h = getDocHeight();
                    const shrank = shrinkAware && lastHeight && h < lastHeight - 80;
                    lastHeight = h;
                    post({type: 'booking-system:resize', height: h, shrank});
                });
            }

            function safeObserve(el) {
                if (el && el.nodeType === 1) {
                    try {
                        ro.observe(el);
                    } catch (_) {
                    }
                }
            }

            // Run AFTER body exists
            window.addEventListener('load', () => {
                postHeight(false);
                ro = new ResizeObserver(() => postHeight(true));
                const root = document.getElementById('app') || document.getElementById('root') || document.body;
                safeObserve(root);
                safeObserve(document.documentElement);
                setInterval(() => postHeight(true), 800);
            });

            // Optional API for explicit scroll requests
            window.requestParentScrollToTop = () => post({type: 'booking-system:scrollToTop'});
        })();
    </script>


</head>
<body>
<app-root>Loading...</app-root>
</body>
</html>
